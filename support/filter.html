<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>CSS Filter Tester</title>
  <script src="colorizeSVG.js"></script>
  <style>
    body {
      font-family: sans-serif;
      padding: 20px;
      background: #f0f0f0;
    }
    .container {
      display: flex;
      gap: 20px;
      flex-wrap: wrap;
      align-items: flex-start;
    }
    canvas, img {
      border: 1px solid #ccc;
      border-radius: 8px;
      cursor: crosshair;
      /* Ako želiš dodatni CSS filter efekat prilikom renderovanja u browseru: */
      /* filter: drop-shadow(0 0 5px rgba(0,0,0,0.2)); */
    }
    .controls {
      display: flex;
      flex-direction: column;
      gap: 12px;
      max-width: 360px;
    }
    label {
      display: flex;
      flex-direction: column;
      font-weight: bold;
    }
    .slider-row {
      display: flex;
      align-items: center;
      gap: 10px;
    }
    input[type=range] {
      flex: 1;
    }
    input[type=number] {
      width: 60px;
      padding: 3px;
    }
    #colorDisplay {
      margin-top: 20px;
      font-weight: bold;
      font-size: 1.2em;
    }
    #filterTEXT {
      font-weight: 400;
      white-space: nowrap;
    }
    .nav {
      display: flex;
      flex-direction: row;
      width: 100vw;
    }
  </style>
</head>
<body>

  <div class="nav">
    <label><strong>Referentna boja (HEX):</strong>
      <input type="text" id="targetColorInput" value="#ffcc00" />
      <span id="targetColorBox" style="
        display: inline-block;
        width: 120px;
        height: 120px;
        margin-left: 10px;
        vertical-align: middle;
        border: 1px solid #000;
        background-color: #ffcc00;"></span>
    </label>
    <label><strong>Odaberi sliku:</strong>
      <input type="file" accept="image/*" id="imageInput">
    </label>
    <button onclick="colorizeSVG(document.getElementById('LOGO'), getColor(), 0.5)">
      Get Colors
    </button>
  </div>

  <div class="container">
    <img id="preview" width="600" height="600" src="../img/logo/logo.svg" alt="Preview" />
    <svg id="LOGO" xmlns="http://www.w3.org/2000/svg" version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 600 600">
      <!-- Generator: Adobe Illustrator 29.3.1, SVG Export Plug-In . SVG Version: 2.1.0 Build 151)  -->
      <defs>
        <style>
          .st0 {
            fill: url(#linear-gradient-logo9);
          }
    
          .st0, .st1, .st2, .st3, .st4, .st5, .st6, .st7, .st8, .st9, .st10, .st11, .st12, .st13, .st14 {
            stroke: #3c3c3c;
            stroke-miterlimit: 10;
          }
    
          .st0, .st1, .st2, .st3, .st4, .st6, .st7, .st8, .st9, .st10, .st11, .st12, .st13, .st14 {
            stroke-width: 3px;
          }
    
          .st1 {
            fill: url(#linear-gradient-logo6);
          }
    
          .st2 {
            fill: url(#linear-gradient-logo);
          }
    
          .st3 {
            fill: url(#linear-gradient-logo13);
          }
    
          .st4 {
            fill: url(#linear-gradient-logo2);
          }
    
          .st5 {
            fill: url(#radial-gradient);
            stroke-width: 12px;
          }
    
          .st6 {
            fill: url(#linear-gradient-logo3);
          }
    
          .st7 {
            fill: url(#linear-gradient-logo7);
          }
    
          .st8 {
            fill: url(#linear-gradient-logo4);
          }
    
          .st9 {
            fill: url(#linear-gradient-logo10);
          }
    
          .st10 {
            fill: url(#linear-gradient-logo1);
          }
    
          .st11 {
            fill: url(#linear-gradient-logo5);
          }
    
          .st12 {
            fill: url(#linear-gradient-logo12);
          }
    
          .st13 {
            fill: url(#linear-gradient-logo8);
          }
    
          .st14 {
            fill: url(#linear-gradient-logo11);
          }
        </style>
        <radialGradient id="radial-gradient" cx="-266" cy="174.7" fx="-266" fy="174.7" r="255.8" gradientTransform="translate(-195.3 500) rotate(-180) scale(1.9 1.1)" gradientUnits="userSpaceOnUse">
          <stop offset="0" stop-color="#f3f3f3"/>
          <stop offset=".2" stop-color="#ededed"/>
          <stop offset=".5" stop-color="#dedede"/>
          <stop offset=".8" stop-color="#c6c6c6"/>
          <stop offset="1" stop-color="#b5b5b5"/>
        </radialGradient>
        <linearGradient id="linear-gradient-logo" x1="-1.9" y1="462.2" x2="168.6" y2="462.2" gradientTransform="translate(0 491.8) scale(1 -1)" gradientUnits="userSpaceOnUse">
          <stop offset="0" stop-color="#939393"/>
          <stop offset=".3" stop-color="#b1b1af"/>
          <stop offset=".5" stop-color="#c9cac5"/>
          <stop offset=".8" stop-color="#d7d8d3"/>
          <stop offset="1" stop-color="#ddded8"/>
        </linearGradient>
        <linearGradient id="linear-gradient-logo1" x1="149.9" y1="292.5" x2="300" y2="292.5" gradientTransform="translate(0 491.8) scale(1 -1)" gradientUnits="userSpaceOnUse">
          <stop offset="0" stop-color="#ddded8"/>
          <stop offset=".2" stop-color="#d7d8d3"/>
          <stop offset=".5" stop-color="#c9c9c5"/>
          <stop offset=".7" stop-color="#b1b1af"/>
          <stop offset="1" stop-color="#939393"/>
        </linearGradient>
        <linearGradient id="linear-gradient-logo2" x1="-1.9" y1="191.1" x2="299.8" y2="191.1" gradientTransform="translate(0 491.8) scale(1 -1)" gradientUnits="userSpaceOnUse">
          <stop offset="0" stop-color="#ddded8"/>
          <stop offset=".2" stop-color="#d7d8d3"/>
          <stop offset=".5" stop-color="#c9c9c5"/>
          <stop offset=".7" stop-color="#b1b1af"/>
          <stop offset="1" stop-color="#939393"/>
        </linearGradient>
        <linearGradient id="linear-gradient-logo3" x1="272.4" y1="40.8" x2="299.9" y2="40.8" gradientTransform="translate(0 491.8) scale(1 -1)" gradientUnits="userSpaceOnUse">
          <stop offset="0" stop-color="#ababab"/>
          <stop offset="0" stop-color="#a9a9a9"/>
          <stop offset=".3" stop-color="#87898a"/>
          <stop offset=".6" stop-color="#6e7174"/>
          <stop offset=".8" stop-color="#606366"/>
          <stop offset="1" stop-color="#5b5f62"/>
        </linearGradient>
        <linearGradient id="linear-gradient-logo4" x1="-1.9" y1="442.4" x2="149.9" y2="442.4" gradientTransform="translate(0 491.8) scale(1 -1)" gradientUnits="userSpaceOnUse">
          <stop offset="0" stop-color="#7f7f7d"/>
          <stop offset="1" stop-color="#c3c3c3"/>
        </linearGradient>
        <linearGradient id="linear-gradient-logo5" x1="8.3" y1="240.8" x2="280.2" y2="240.8" gradientTransform="translate(0 491.8) scale(1 -1)" gradientUnits="userSpaceOnUse">
          <stop offset="0" stop-color="#ababab"/>
          <stop offset="0" stop-color="#a9a9a9"/>
          <stop offset=".3" stop-color="#87898a"/>
          <stop offset=".6" stop-color="#6e7174"/>
          <stop offset=".8" stop-color="#606366"/>
          <stop offset="1" stop-color="#5b5f62"/>
        </linearGradient>
        <linearGradient id="linear-gradient-logo6" x1="121.8" y1="255.8" x2="299.9" y2="255.8" gradientTransform="translate(0 491.8) scale(1 -1)" gradientUnits="userSpaceOnUse">
          <stop offset="0" stop-color="#c3c3c3"/>
          <stop offset="1" stop-color="#7f7f7d"/>
        </linearGradient>
        <linearGradient id="linear-gradient-logo7" x1="431.3" y1="462.4" x2="601.8" y2="462.4" gradientTransform="translate(0 491.8) scale(1 -1)" gradientUnits="userSpaceOnUse">
          <stop offset="0" stop-color="#ddded8"/>
          <stop offset=".2" stop-color="#d7d8d3"/>
          <stop offset=".5" stop-color="#c9c9c5"/>
          <stop offset=".7" stop-color="#b1b1af"/>
          <stop offset="1" stop-color="#939393"/>
        </linearGradient>
        <linearGradient id="linear-gradient-logo8" x1="299.9" y1="292.7" x2="450" y2="292.7" gradientTransform="translate(0 491.8) scale(1 -1)" gradientUnits="userSpaceOnUse">
          <stop offset="0" stop-color="#939393"/>
          <stop offset=".3" stop-color="#b1b1af"/>
          <stop offset=".5" stop-color="#c9cac5"/>
          <stop offset=".8" stop-color="#d7d8d3"/>
          <stop offset="1" stop-color="#ddded8"/>
        </linearGradient>
        <linearGradient id="linear-gradient-logo9" x1="300.1" y1="191.3" x2="601.8" y2="191.3" gradientTransform="translate(0 491.8) scale(1 -1)" gradientUnits="userSpaceOnUse">
          <stop offset="0" stop-color="#939393"/>
          <stop offset=".3" stop-color="#b1b1af"/>
          <stop offset=".5" stop-color="#c9cac5"/>
          <stop offset=".8" stop-color="#d7d8d3"/>
          <stop offset="1" stop-color="#ddded8"/>
        </linearGradient>
        <linearGradient id="linear-gradient-logo10" x1="300" y1="41" x2="327.5" y2="41" gradientTransform="translate(0 491.8) scale(1 -1)" gradientUnits="userSpaceOnUse">
          <stop offset="0" stop-color="#5b5f62"/>
          <stop offset=".2" stop-color="#606366"/>
          <stop offset=".4" stop-color="#6f7274"/>
          <stop offset=".7" stop-color="#87898a"/>
          <stop offset="1" stop-color="#a9a9a9"/>
          <stop offset="1" stop-color="#ababab"/>
        </linearGradient>
        <linearGradient id="linear-gradient-logo11" x1="450" y1="442.7" x2="601.8" y2="442.7" gradientTransform="translate(0 491.8) scale(1 -1)" gradientUnits="userSpaceOnUse">
          <stop offset="0" stop-color="#c3c3c3"/>
          <stop offset="1" stop-color="#7f7f7d"/>
        </linearGradient>
        <linearGradient id="linear-gradient-logo12" x1="319.7" y1="241" x2="591.6" y2="241" gradientTransform="translate(0 491.8) scale(1 -1)" gradientUnits="userSpaceOnUse">
          <stop offset="0" stop-color="#5b5f62"/>
          <stop offset=".2" stop-color="#606366"/>
          <stop offset=".4" stop-color="#6f7274"/>
          <stop offset=".7" stop-color="#87898a"/>
          <stop offset="1" stop-color="#a9a9a9"/>
          <stop offset="1" stop-color="#ababab"/>
        </linearGradient>
        <linearGradient id="linear-gradient-logo13" x1="300" y1="256" x2="478.1" y2="256" gradientTransform="translate(0 491.8) scale(1 -1)" gradientUnits="userSpaceOnUse">
          <stop offset="0" stop-color="#7f7f7d"/>
          <stop offset="1" stop-color="#c3c3c3"/>
        </linearGradient>
      </defs>
      <path class="st5" d="M275.7,574.6l-189.7-88.6c-16.5-7.7-28.6-22.8-32.9-40.8L7.7,251.8c-4.4-18.8.1-38.6,12.3-53.3L149.1,41.4c11.2-13.6,27.6-21.4,44.9-21.4h211.9c17.3,0,33.7,7.8,44.9,21.4l129.2,157.1c12.1,14.7,16.7,34.5,12.3,53.3l-45.5,193.4c-4.3,18.1-16.4,33.1-32.9,40.8l-189.7,88.6c-15.4,7.2-33.2,7.2-48.6,0h0Z"/>
      <g>
        <path class="st2" d="M159.8,36.9L1.4.2c-.1.1-.2.3-.3.4l148.8,58.2,18.7-17.3-8.7-4.6h0Z"/>
        <polygon class="st10" points="300 286.7 299.9 357 149.9 58.8 168.6 41.5 177.3 46.1 300 286.7"/>
        <path class="st4" d="M299.7,599.9v-54.9s-27.4-50.6-27.4-50.6L8.3,7.6.5,1.3s0,0,0,0c0,.6-.2,1.2-.4,1.8l299.3,596.6c.1,0,.3,0,.4,0h0Z"/>
        <polygon class="st6" points="299.9 357 299.8 545 272.4 494.4 280.2 413.1 283.5 378.3 299.9 357"/>
        <path class="st8" d="M1.1.6c-.2.2-.4.5-.6.7l7.8,6.2,113.5,90.6h0s28.2-39.3,28.2-39.3L1.1.6Z"/>
        <polygon class="st11" points="280.2 413.1 272.4 494.4 8.3 7.6 121.7 98.2 121.8 98.2 280.2 413.1"/>
        <polygon class="st1" points="299.9 357 299.9 357 283.5 378.3 280.2 413.1 121.8 98.2 149.9 58.8 299.9 357"/>
        <path class="st7" d="M598.4,0l-158.4,36.7-8.7,4.6,18.7,17.3L599.5.1s0,0,0,0c-.3,0-.7,0-1,0h0Z"/>
        <polygon class="st13" points="299.9 286.5 300 356.8 450 58.7 431.3 41.3 422.5 45.9 299.9 286.5"/>
        <path class="st0" d="M599.7.9l-8.1,6.5-264.1,486.9-27.4,50.6v55.2c.1,0,.2,0,.3,0L599.7,3.3c0-.7.1-1.3.3-1.9,0-.2-.2-.3-.3-.5Z"/>
        <polygon class="st9" points="300 356.8 300.1 544.8 327.5 494.2 319.7 412.9 316.4 378.1 300 356.8"/>
        <path class="st14" d="M599.5.1l-149.5,58.5,28.2,39.4h0S591.6,7.4,591.6,7.4l8.1-6.5c0-.2-.2-.5-.3-.7Z"/>
        <polygon class="st12" points="319.7 412.9 327.5 494.2 591.6 7.4 478.1 98 478.1 98 319.7 412.9"/>
        <polygon class="st3" points="300 356.8 300 356.8 316.4 378.1 319.7 412.9 478.1 98 450 58.7 300 356.8"/>
      </g>
    </svg>

    <div class="controls">
      <label>Invert (%)
        <div class="slider-row">
          <input type="range" min="0" max="100" value="0" id="invert">
          <input type="number" min="0" max="100" value="0" id="invertNum">
        </div>
      </label>
      <label>Sepia (%)
        <div class="slider-row">
          <input type="range" min="0" max="100" value="0" id="sepia">
          <input type="number" min="0" max="100" value="0" id="sepiaNum">
        </div>
      </label>
      <label>Saturate (%)
        <div class="slider-row">
          <input type="range" min="0" max="10000" value="100" step="50" id="saturate">
          <input type="number" min="0" max="10000" value="100" step="50" id="saturateNum">
        </div>
      </label>
      <label>Hue Rotate (deg)
        <div class="slider-row">
          <input type="range" min="0" max="360" value="0" id="hue">
          <input type="number" min="0" max="360" value="0" id="hueNum">
        </div>
      </label>
      <label>Brightness (%)
        <div class="slider-row">
          <input type="range" min="0" max="600" value="100" id="brightness">
          <input type="number" min="0" max="600" value="100" id="brightnessNum">
        </div>
      </label>
      <label>Contrast (%)
        <div class="slider-row">
          <input type="range" min="0" max="600" value="100" id="contrast">
          <input type="number" min="0" max="600" value="100" id="contrastNum">
        </div>
      </label>
      <label>Hex Code
        <div id="filterTEXT">
        </div>
      </label>
    </div>
  </div>

  <!-- Prikaz izabranog hex koda -->
  <div id="colorDisplay">Klikni na sliku da vidiš hex kod boje</div>

  <script>
    document.getElementById('imageInput').addEventListener('change', function(e) {
      const file = e.target.files[0];
      if (!file) return;
  
      const reader = new FileReader();
      reader.onload = function(event) {
        document.getElementById('preview').src = event.target.result;
      };
      reader.readAsDataURL(file);
    });
  </script>

  <script>
    const filters = ['invert', 'sepia', 'saturate', 'hue', 'brightness', 'contrast'];
    const img = document.getElementById('preview');
    img.crossOrigin = "anonymous"

    filters.forEach(id => {
      const rangeInput = document.getElementById(id);
      const numberInput = document.getElementById(id + 'Num');

      // Kad vučeš slider
      rangeInput.addEventListener('input', () => {
        numberInput.value = rangeInput.value;
        updateFilter();
      });

      // Kad uneseš broj
      numberInput.addEventListener('input', () => {
        rangeInput.value = numberInput.value;
        updateFilter();
      });
    });

    function updateFilter() {
      const values = {
        invert: document.getElementById('invert').value,
        sepia: document.getElementById('sepia').value,
        saturate: document.getElementById('saturate').value,
        hue: document.getElementById('hue').value,
        brightness: document.getElementById('brightness').value,
        contrast: document.getElementById('contrast').value,
      };

      filterValues = `
        invert(${values.invert}%)
        sepia(${values.sepia}%)
        saturate(${values.saturate}%)
        hue-rotate(${values.hue}deg)
        brightness(${values.brightness}%)
        contrast(${values.contrast}%)
      `

      img.style.filter = filterValues;
      const filterTEXT = document.getElementById('filterTEXT')
      filterTEXT.innerHTML = filterValues

    }

    updateFilter();

    // Dodatak: Klikom na sliku se ispisuje hex kod boje na toj tački
    img.addEventListener('click', function(e) {
      // Kreiramo privremeni canvas
      const offCanvas = document.createElement('canvas');
      const offCtx = offCanvas.getContext('2d');
      offCanvas.width = img.naturalWidth;
      offCanvas.height = img.naturalHeight;
      // Primeni filter koji je trenutno na slici
      offCtx.filter = img.style.filter;
      // Iscrtaj sliku u punoj veličini
      offCtx.drawImage(img, 0, 0);

      // Izračunaj poziciju klika u odnosu na originalnu sliku
      const rect = img.getBoundingClientRect();
      const scaleX = img.naturalWidth / rect.width;
      const scaleY = img.naturalHeight / rect.height;
      const x = (e.clientX - rect.left) * scaleX;
      const y = (e.clientY - rect.top) * scaleY;

      // Uzimanje podataka piksela
      const pixel = offCtx.getImageData(x, y, 1, 1).data;
      const hex = "#" + [pixel[0], pixel[1], pixel[2]]
        .map(c => {
          const hex = c.toString(16);
          return hex.length == 1 ? "0" + hex : hex;
        })
        .join('');
      document.getElementById('colorDisplay').textContent = hex;
    });
  </script>
  <script>
    const targetInput = document.getElementById('targetColorInput');
    const targetBox = document.getElementById('targetColorBox');
  
    targetInput.addEventListener('input', () => {
      const color = targetInput.value;
      // Proveri da li je validan HEX
      if (/^#[0-9a-fA-F]{6}$/.test(color)) {
        targetBox.style.backgroundColor = color;
      }
    });
    function getColor() {
      rgbString = targetBox.style.backgroundColor
      const [r, g, b] = rgbString
      .match(/\d+/g)        // nađe ["80","128","80"]
      .map(num => Number(num)); // [80,128,80]

    // 3. Pretvori svaki kanal u heks i spoji
    const hex = '#' + [r, g, b]
      .map(x => x.toString(16).padStart(2, '0'))  // ["50","80","50"]
      .join('');                                  // "508050"

    // 4. Rezultat:
    console.log(hex); // => "#508050"
      return hex
    }
  </script>
</body>
</html>
